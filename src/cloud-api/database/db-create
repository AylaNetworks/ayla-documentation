CREATE DATABASE IF NOT EXISTS ayla_cloud_api;

CREATE TABLE IF NOT EXISTS api (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    method VARCHAR(16) NOT NULL,
    path_id INT,
    service_id INT,
    description TEXT,
    request_description TEXT,
    response_description TEXT
);

CREATE TABLE IF NOT EXISTS path (
    id INT AUTO_INCREMENT PRIMARY KEY,
    path VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS service (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS tag (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS parameter (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    type VARCHAR(16),
    description TEXT
);

CREATE TABLE IF NOT EXISTS request_data (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    json TEXT
);

CREATE TABLE IF NOT EXISTS status_code (
    code INT,
    text VARCHAR(128)
);

CREATE TABLE IF NOT EXISTS api_tag_map (
    api_id INT,
    tag_id INT
);

CREATE TABLE IF NOT EXISTS api_parameter_map (
    api_id INT,
    parameter_id INT,
    type VARCHAR(16),
    position INT,
    required BOOLEAN,
    `default` VARCHAR(64),
    choices VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS api_query_parameter_map (
    api_id INT,
    parameter_id INT,
    type VARCHAR(16),
    position INT,
    required BOOLEAN,
    `default` VARCHAR(64),
    choices VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS api_request_data_map (
    api_id INT,
    request_data_id INT
);

CREATE TABLE IF NOT EXISTS api_status_code_map (
    api_id INT,
    code INT,
    text VARCHAR(255)
);



